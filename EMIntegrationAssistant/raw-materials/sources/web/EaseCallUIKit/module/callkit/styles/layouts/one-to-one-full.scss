@import '../variables.scss';
@import '../mixins.scss';

$callkit-prefix-cls: #{$cui-prefix}-callkit;

// OneToOne å®Œæ•´å¸ƒå±€æ ·å¼
.#{$callkit-prefix-cls}-one-to-one-full-layout {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.30) 0%, rgba(0, 0, 0, 0.00) 20%, rgba(0, 0, 0, 0.00) 20%, rgba(0, 0, 0, 0.20) 100%);
  // background: #171A1C;

  // è§†é¢‘å†…å®¹åŒºåŸŸ - å æ»¡æ•´ä¸ªå®¹å™¨
  .#{$callkit-prefix-cls}-video-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    background: #171A1C;
  }

  // ä¸»è§†é¢‘ï¼ˆè¿œç¨‹è§†é¢‘ï¼‰- èƒŒæ™¯
  .#{$callkit-prefix-cls}-main-video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    
    .#{$callkit-prefix-cls}-window {
      width: 100%;
      height: 100%;
      border-radius: 0; // ç§»é™¤åœ†è§’ï¼Œå æ»¡æ•´ä¸ªå®¹å™¨
      border: none;
    }
  }

  // ç”»ä¸­ç”»è§†é¢‘ï¼ˆæœ¬åœ°è§†é¢‘ï¼‰- å³ä¸Šè§’
  .#{$callkit-prefix-cls}-pip-video {
    position: absolute;
    top: 64px;
    right: 13px;
    // ğŸ”§ è‡ªé€‚åº”å°ºå¯¸è®¾ç½® - æ ¹æ®è§†é¢‘æµåˆ†è¾¨ç‡åŠ¨æ€è°ƒæ•´
    width: clamp(120px, 21%, 200px); // æœ€å°120pxï¼Œæœ€å¤§200pxï¼Œé»˜è®¤21%å®¹å™¨å®½åº¦
    // ğŸ”§ é«˜åº¦ç”±JavaScriptåŠ¨æ€è®¡ç®—ï¼Œæ ¹æ®è§†é¢‘æµå®é™…åˆ†è¾¨ç‡
    // ğŸ”§ é«˜åº¦å°†æ ¹æ®è§†é¢‘æµæ¯”ä¾‹åŠ¨æ€è®¡ç®—ï¼Œä¸å†å›ºå®š16:9
    // height: clamp(67px, 8.4vw, 112px);
    z-index: 21; // ç¡®ä¿åœ¨ä¸»è§†é¢‘å’Œé®ç½©ä¹‹ä¸Š
    border-radius: 8px;
    overflow: hidden;
    border: none;
    transition: all $transition-fast;
    box-shadow: 2px 0px 8px 0px rgba(26, 26, 26, 0.10), 0px 4px 4px 0px rgba(77, 77, 77, 0.15);
    
    &:hover {
      // transform: scale(1.05);
      border-color: $border-color-local;
      // box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    }
    
    .#{$callkit-prefix-cls}-window {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 8px;
      
      // ğŸ”§ ç¡®ä¿è§†é¢‘å†…å®¹æ­£ç¡®å¡«å……å®¹å™¨
      video {
        width: 100%;
        height: 100%;
        object-fit: cover; // ä¿æŒæ¯”ä¾‹å¹¶å¡«å……æ•´ä¸ªå®¹å™¨
        border-radius: 8px;
      }
      
      &:hover {
        // transform: none; // ç¦ç”¨åŒé‡ç¼©æ”¾æ•ˆæœ
      }
    }
    
    // ç§»åŠ¨ç«¯é€‚é…
    @media (max-width: $breakpoint-mobile) {
      width: clamp(100px, 36%, 150px); // ç§»åŠ¨ç«¯ç¨å¾®è°ƒæ•´ï¼Œä½¿ç”¨å®¹å™¨å®½åº¦çš„36%
      top: $gap-medium;
      right: $gap-medium;
    }
    
    // å°å±å¹•é€‚é…
    @media (max-width: 480px) {
      width: 100px;
      top: 8px;
      right: 8px;
    }
  }

  // æ¸å˜é®ç½© - å¢å¼º Header å’Œ Controls çš„å¯è¯»æ€§
  .#{$callkit-prefix-cls}-overlay-gradient {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2; // åœ¨ä¸»è§†é¢‘ä¹‹ä¸Šï¼Œä½†åœ¨ç”»ä¸­ç”»å’Œæ§ä»¶ä¹‹ä¸‹
    pointer-events: none; // ä¸é˜»æŒ¡ç”¨æˆ·äº¤äº’
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.30) 0%,
      rgba(0, 0, 0, 0.00) 20%,
      rgba(0, 0, 0, 0.00) 80%,
      rgba(0, 0, 0, 0.20) 100%
    );
  }

  // Header - æµ®åŠ¨åœ¨è§†é¢‘å†…å®¹ä¹‹ä¸Š
  .#{$callkit-prefix-cls}-floating-header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 10;
    height: $header-height;
    background: transparent; // é€æ˜èƒŒæ™¯
    
    // Headerå†…å®¹æ ·å¼è°ƒæ•´
    .cui-header {
      background: transparent;
      border: none;
      margin: 7px 4px 0;
      .cui-header-content-text{
        color: $gray-98 !important;
      }
      .cui-header-content-sub{
        color: $gray-7;
      }
      .cui-header-title,
      .cui-header-subtitle {
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5); // æ·»åŠ æ–‡å­—é˜´å½±å¢å¼ºå¯è¯»æ€§
      }
    }
  }

  // Controls - æµ®åŠ¨åœ¨è§†é¢‘å†…å®¹ä¹‹ä¸Š
  .#{$callkit-prefix-cls}-floating-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 10;
    height: $controls-height;
    background: transparent; // é€æ˜èƒŒæ™¯
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 16px;
  }

  // æœ€å°åŒ–çŠ¶æ€çš„æ§åˆ¶åŒºåŸŸ
  .#{$callkit-prefix-cls}-minimized-controls {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 20;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all $transition-fast;
    
    &:hover {
      background: rgba(0, 0, 0, 0.9);
    }
  }

  // æœ€å°åŒ–çŠ¶æ€çš„ä¿¡æ¯åŒºåŸŸ
  .#{$callkit-prefix-cls}-minimized-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 12px;
  }

  // æœ€å°åŒ–çŠ¶æ€çš„å¤´åƒ
  .#{$callkit-prefix-cls}-minimized-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
  }

  // æœ€å°åŒ–çŠ¶æ€çš„æ—¶é—´æ˜¾ç¤º
  .#{$callkit-prefix-cls}-minimized-time {
    color: white;
    font-size: 12px;
    font-weight: 500;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
  }

  // æœ€å°åŒ–çŠ¶æ€çš„å¿«é€Ÿæ§åˆ¶æŒ‰é’®
  .#{$callkit-prefix-cls}-minimized-quick-controls {
    display: flex;
    gap: 8px;
    
    .cui-btn {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all $transition-fast;
      
      &:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(1.1);
      }
    }
  }

  // è¯­éŸ³é€šè¯å†…å®¹åŒºåŸŸ
  .#{$callkit-prefix-cls}-audio-call-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    z-index: 1;
  }

  // è¯­éŸ³é€šè¯å¤´åƒåŒºåŸŸ
  .#{$callkit-prefix-cls}-audio-call-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    margin-bottom: 24px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  // è¯­éŸ³é€šè¯å¤´åƒå ä½ç¬¦
  .#{$callkit-prefix-cls}-avatar-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #171A1C;
    color: white;
    font-size: 48px;
    font-weight: 600;
    text-transform: uppercase;
  }

  // è¯­éŸ³é€šè¯ä¿¡æ¯åŒºåŸŸ
  .#{$callkit-prefix-cls}-audio-call-info {
    text-align: center;
    color: white;
  }

  // é€šè¯è€…å§“å
  .#{$callkit-prefix-cls}-caller-name {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 8px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  // é€šè¯çŠ¶æ€
  .#{$callkit-prefix-cls}-call-status {
    font-size: 16px;
    opacity: 0.9;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }
} 