# EaseIM MCP Server æŠ€æœ¯æ–‡æ¡£

> ç¯ä¿¡ IM SDK å¼€å‘åŠ©æ‰‹ - åŸºäº MCP åè®®çš„æ™ºèƒ½æ–‡æ¡£æŸ¥è¯¢å’Œæºç æœç´¢æœåŠ¡

## ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [MCP å·¥å…·æ¸…å•](#mcp-å·¥å…·æ¸…å•)
- [æœç´¢å¼•æ“](#æœç´¢å¼•æ“)
- [æ™ºèƒ½åŒ–æ¨¡å—](#æ™ºèƒ½åŒ–æ¨¡å—)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [å®¢æˆ·ç«¯é…ç½®](#å®¢æˆ·ç«¯é…ç½®)
- [å¼€å‘ç»´æŠ¤](#å¼€å‘ç»´æŠ¤)

---

## é¡¹ç›®æ¦‚è¿°

### å®šä½

EaseIM MCP Server æ˜¯ä¸€ä¸ªä¸ºç¯ä¿¡ IM SDK å¼€å‘è€…è®¾è®¡çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œé€šè¿‡ MCP (Model Context Protocol) åè®®ä¸º AI å®¢æˆ·ç«¯æä¾›ï¼š

- **æ–‡æ¡£æŸ¥è¯¢** - é—­æº SDK çš„ API æ–‡æ¡£ã€é”™è¯¯ç ã€é›†æˆæŒ‡å—
- **æºç æœç´¢** - å¼€æº UIKit ç»„ä»¶çš„æºç æ£€ç´¢å’Œå®šåˆ¶æ–¹æ¡ˆ
- **æ™ºèƒ½è¯Šæ–­** - åŸºäºè‡ªç„¶è¯­è¨€çš„é—®é¢˜è¯Šæ–­å’Œè§£å†³æ–¹æ¡ˆ
- **ä»£ç ç”Ÿæˆ** - å¸¸è§å¼€å‘åœºæ™¯çš„ä»£ç æ¨¡æ¿ç”Ÿæˆ

### æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | è¯´æ˜ |
|------|------|
| è¯­è¨€ | TypeScript |
| è¿è¡Œæ—¶ | Node.js >= 18 |
| åè®® | MCP (Model Context Protocol) |
| SDK | @modelcontextprotocol/sdk |

### æ”¯æŒçš„å®¢æˆ·ç«¯

| å®¢æˆ·ç«¯ | æ”¯æŒæ–¹å¼ |
|--------|---------|
| Claude Code (CLI) | MCP åè®® |
| Claude Desktop | MCP åè®® |
| Cursor | MCP åè®® |
| VS Code + Continue | MCP åè®® |
| Xcode + GitHub Copilot | MCP åè®® |

---

## æ¶æ„è®¾è®¡

### å››å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MCP å®¢æˆ·ç«¯                               â”‚
â”‚         (Claude Code / Cursor / VS Code / Xcode Copilot)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ MCP Protocol (stdio)
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MCP å·¥å…·å±‚ (14 ä¸ªå·¥å…·)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ lookup_errorâ”‚ search_api  â”‚search_sourceâ”‚ smart_assistâ”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚ get_guide   â”‚ diagnose    â”‚ read_doc    â”‚generate_codeâ”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚list_config  â”‚get_extensionâ”‚get_config   â”‚explain_classâ”‚     â”‚
â”‚  â”‚  _options   â”‚  _points    â”‚  _usage     â”‚             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ™ºèƒ½åŒ–å±‚ (P0 ä¼˜åŒ–)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚IntentClassifierâ”‚ QueryExpander â”‚SimilarityMatcherâ”‚           â”‚
â”‚  â”‚   æ„å›¾åˆ†ç±»      â”‚  æŸ¥è¯¢æ‰©å±•      â”‚   ç›¸ä¼¼åº¦åŒ¹é…    â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚  â”‚KnowledgeGraph â”‚ CodeGenerator â”‚               â”‚             â”‚
â”‚  â”‚   çŸ¥è¯†å›¾è°±      â”‚   ä»£ç ç”Ÿæˆ     â”‚               â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æœç´¢å¼•æ“å±‚ (P1/P2 ä¼˜åŒ–)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   DocSearch   â”‚ SourceSearch  â”‚ ConfigSearch  â”‚             â”‚
â”‚  â”‚   æ–‡æ¡£æœç´¢     â”‚   æºç æœç´¢     â”‚   é…ç½®æœç´¢    â”‚             â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚  â”‚ InvertedIndex â”‚ShardedSource  â”‚AmbiguityDetectorâ”‚           â”‚
â”‚  â”‚   å€’æ’ç´¢å¼•     â”‚  Search åˆ†ç‰‡   â”‚   æ­§ä¹‰æ£€æµ‹    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•°æ®ç´¢å¼•å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚     docs/index.json   â”‚   sources/manifest.jsonâ”‚            â”‚
â”‚  â”‚     API æ–‡æ¡£ç´¢å¼•       â”‚     æºç åˆ†ç‰‡æ¸…å•        â”‚            â”‚
â”‚  â”‚     - apiModules      â”‚   sources/shards/      â”‚            â”‚
â”‚  â”‚     - errorCodeIndex  â”‚   â”œâ”€â”€ EaseChatUIKit.jsonâ”‚           â”‚
â”‚  â”‚     - guides          â”‚   â”œâ”€â”€ EaseCallUIKit.jsonâ”‚           â”‚
â”‚  â”‚                       â”‚   â””â”€â”€ ...              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
easeim-mcp-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # å…¥å£
â”‚   â”œâ”€â”€ server.ts                   # MCP Server å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â””â”€â”€ index.ts                # å·¥å…·å®šä¹‰ (14 ä¸ªå·¥å…·)
â”‚   â”‚
â”‚   â”œâ”€â”€ search/                     # æœç´¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ DocSearch.ts            # æ–‡æ¡£æœç´¢ (å€’æ’ç´¢å¼• + BM25)
â”‚   â”‚   â”œâ”€â”€ SourceSearch.ts         # æºç æœç´¢
â”‚   â”‚   â”œâ”€â”€ ShardedSourceSearch.ts  # åˆ†ç‰‡æºç æœç´¢ (P2)
â”‚   â”‚   â”œâ”€â”€ ConfigSearch.ts         # é…ç½®æœç´¢
â”‚   â”‚   â”œâ”€â”€ InvertedIndex.ts        # å€’æ’ç´¢å¼• (P1)
â”‚   â”‚   â”œâ”€â”€ AmbiguityDetector.ts    # æ­§ä¹‰æ£€æµ‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ intelligence/               # æ™ºèƒ½åŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ IntentClassifier.ts     # æ„å›¾åˆ†ç±» (P0)
â”‚   â”‚   â”œâ”€â”€ QueryExpander.ts        # æŸ¥è¯¢æ‰©å±• (P0)
â”‚   â”‚   â”œâ”€â”€ SimilarityMatcher.ts    # ç›¸ä¼¼åº¦åŒ¹é… (TF-IDF)
â”‚   â”‚   â”œâ”€â”€ KnowledgeGraph.ts       # çŸ¥è¯†å›¾è°±
â”‚   â”‚   â”œâ”€â”€ CodeGenerator.ts        # ä»£ç ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ index.ts                # ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ docs/                       # SDK æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ index.json              # æ–‡æ¡£ç´¢å¼•
â”‚   â”‚   â””â”€â”€ api/                    # API æ–‡æ¡£ Markdown
â”‚   â”‚
â”‚   â””â”€â”€ sources/                    # UIKit æºç 
â”‚       â”œâ”€â”€ index.json              # å®Œæ•´ç´¢å¼• (å…¼å®¹)
â”‚       â”œâ”€â”€ manifest.json           # åˆ†ç‰‡æ¸…å• (7KB)
â”‚       â””â”€â”€ shards/                 # åˆ†ç‰‡ç´¢å¼•
â”‚           â”œâ”€â”€ EaseChatUIKit.json
â”‚           â”œâ”€â”€ EaseCallUIKit.json
â”‚           â”œâ”€â”€ EaseChatroomUIKit.json
â”‚           â””â”€â”€ EaseChatDemo.json
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate-docs-index.ts      # ç”Ÿæˆæ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ generate-source-index.ts    # ç”Ÿæˆæºç ç´¢å¼•
â”‚   â”œâ”€â”€ generate-shards.ts          # ç”Ÿæˆåˆ†ç‰‡ç´¢å¼•
â”‚   â””â”€â”€ analyze-config-impact.ts    # åˆ†æé…ç½®å½±å“
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ benchmark-search.ts         # æœç´¢æ€§èƒ½æµ‹è¯•
    â””â”€â”€ benchmark-sharded-search.ts # åˆ†ç‰‡æœç´¢æµ‹è¯•
```

---

## MCP å·¥å…·æ¸…å•

### åŸºç¡€å·¥å…· (10 ä¸ª)

| å·¥å…·å | åŠŸèƒ½ | æ ¸å¿ƒå‚æ•° |
|--------|------|----------|
| `lookup_error` | æŸ¥è¯¢é”™è¯¯ç çš„å«ä¹‰ã€åŸå› å’Œè§£å†³æ–¹æ¡ˆ | `code: number` |
| `search_api` | æœç´¢ API æ–‡æ¡£ï¼Œæ”¯æŒå¹³å°/å±‚çº§è¿‡æ»¤ | `query`, `platform?`, `layer?` |
| `search_source` | æœç´¢ UIKit æºç ï¼Œç”¨äº UI å®šåˆ¶ | `query`, `component?` |
| `get_guide` | è·å–é›†æˆæŒ‡å— | `topic: quickstart\|login\|message\|...` |
| `diagnose` | æ ¹æ®ç—‡çŠ¶è¯Šæ–­é”™è¯¯åŸå›  | `symptom: string` |
| `read_doc` | è¯»å–å®Œæ•´æ–‡æ¡£å†…å®¹ | `path: string` |
| `read_source` | è¯»å–æºç æ–‡ä»¶å†…å®¹ | `path`, `startLine?`, `endLine?` |
| `list_config_options` | åˆ—å‡º UIKit é…ç½®é¡¹ | `component?` |
| `get_extension_points` | è·å–å¯æ‰©å±•çš„åè®®å’Œç±» | `component?`, `type?` |
| `get_config_usage` | æŸ¥è¯¢é…ç½®é¡¹ä½¿ç”¨è¯¦æƒ… | `propertyName` |

### æ™ºèƒ½åŒ–å·¥å…· (4 ä¸ª)

| å·¥å…·å | åŠŸèƒ½ | ç¤ºä¾‹ |
|--------|------|------|
| `smart_assist` | ğŸ§  è‡ªç„¶è¯­è¨€æ™ºèƒ½åŠ©æ‰‹ | "æˆ‘æƒ³è‡ªå®šä¹‰ä¸€ä¸ªè®¢å•æ¶ˆæ¯" |
| `generate_code` | ğŸ“ ä»£ç æ¨¡æ¿ç”Ÿæˆ | `scenario="custom_message"` |
| `explain_class` | ğŸ“– ç±»ç”¨æ³•è§£é‡Š | `className="MessageCell"` |
| `list_scenarios` | ğŸ“‹ å¼€å‘åœºæ™¯åˆ—è¡¨ | `keyword="æ¶ˆæ¯"` |

### å·¥å…·ä½¿ç”¨ç¤ºä¾‹

```
# æŸ¥è¯¢é”™è¯¯ç 
lookup_error code=508

# æœç´¢ API (æ”¯æŒä¸­è‹±æ–‡)
search_api query="å‘é€æ¶ˆæ¯"
search_api query="sendMessage" platform="ios"

# æ™ºèƒ½åŠ©æ‰‹
smart_assist query="æˆ‘æƒ³è‡ªå®šä¹‰ä¸€ä¸ªè®¢å•æ¶ˆæ¯ç±»å‹"

# ç”Ÿæˆä»£ç 
generate_code scenario="custom_message" name="Order"

# æœç´¢æºç 
search_source query="MessageBubble" component="EaseChatUIKit"
```

---

## æœç´¢å¼•æ“

### DocSearch (æ–‡æ¡£æœç´¢)

**åŠŸèƒ½**: æœç´¢é—­æº SDK çš„ API æ–‡æ¡£

**ä¼˜åŒ–ç‰¹æ€§**:
- å€’æ’ç´¢å¼• + BM25 è¯„åˆ† (P1)
- æŸ¥è¯¢æ‰©å±• (90+ åŒä¹‰è¯) (P0)
- å­—æ®µæƒé‡é…ç½®
- å¹³å°/å±‚çº§è¿‡æ»¤

```typescript
// æœç´¢æµç¨‹
Query â†’ QueryExpander(åŒä¹‰è¯) â†’ InvertedIndex(BM25) â†’ Results
```

### SourceSearch / ShardedSourceSearch (æºç æœç´¢)

**åŠŸèƒ½**: æœç´¢å¼€æº UIKit ç»„ä»¶æºç 

**ä¼˜åŒ–ç‰¹æ€§**:
- åˆ†ç‰‡ç´¢å¼•æŒ‰éœ€åŠ è½½ (P2)
- LRU ç¼“å­˜è‡ªåŠ¨æ·˜æ±°
- é©¼å³°å‘½åæ‹†åˆ† (`MessageBubble` â†’ `message bubble`)
- å¹¶è¡Œæœç´¢å¤šä¸ªåˆ†ç‰‡

```typescript
// åˆ†ç‰‡ç»“æ„
manifest.json (7KB) â†’ æŒ‰éœ€åŠ è½½ â†’ shards/EaseChatUIKit.json (827KB)
```

### InvertedIndex (å€’æ’ç´¢å¼•)

**åŠŸèƒ½**: O(k) å¤æ‚åº¦çš„é«˜æ•ˆæœç´¢

**ç‰¹æ€§**:
- BM25 è¯„åˆ†ç®—æ³•
- TF-IDF åŠ æƒ
- å­—æ®µçº§æƒé‡é…ç½®
- ä¸­è‹±æ–‡æ··åˆåˆ†è¯ (å•å­— + Bigram + Trigram)

```typescript
// BM25 è¯„åˆ†å…¬å¼
score = IDF Ã— (tf Ã— (k1 + 1)) / (tf + k1 Ã— (1 - b + b Ã— (docLen / avgDocLen)))
```

### AmbiguityDetector (æ­§ä¹‰æ£€æµ‹)

**åŠŸèƒ½**: æ£€æµ‹è·¨å¹³å°/ç»„ä»¶çš„æ­§ä¹‰æŸ¥è¯¢

**ç¤ºä¾‹**:
```
Query: "sendMessage"
ç»“æœ: iOS (3), Android (2), Web (2)
æç¤º: "æ£€æµ‹åˆ°è·¨å¹³å°ç»“æœï¼Œè¯·æŒ‡å®š platform å‚æ•°"
```

---

## æ™ºèƒ½åŒ–æ¨¡å—

### IntentClassifier (æ„å›¾åˆ†ç±»)

**åŠŸèƒ½**: ç†è§£ç”¨æˆ·è‡ªç„¶è¯­è¨€æ„å›¾

**æ”¯æŒçš„æ„å›¾**:

| æ„å›¾ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `FIX_ERROR` | ä¿®å¤é”™è¯¯ | "é”™è¯¯ç  508 æ€ä¹ˆè§£å†³" |
| `CUSTOMIZE_MESSAGE` | è‡ªå®šä¹‰æ¶ˆæ¯ | "æˆ‘æƒ³æ·»åŠ ä¸€ä¸ªè®¢å•æ¶ˆæ¯" |
| `ADD_MENU_ITEM` | æ·»åŠ èœå• | "å¦‚ä½•æ·»åŠ å‘é€ä½ç½®çš„èœå•" |
| `CUSTOMIZE_UI` | å®šåˆ¶ UI | "æ€ä¹ˆä¿®æ”¹æ°”æ³¡é¢œè‰²" |
| `CONFIGURE_APPEARANCE` | é…ç½®å¤–è§‚ | "å¦‚ä½•è®¾ç½®ä¸»é¢˜è‰²" |
| `UNDERSTAND_CLASS` | ç†è§£ç±» | "MessageCell æ˜¯ä»€ä¹ˆ" |
| `INTEGRATE_SDK` | é›†æˆ SDK | "å¦‚ä½•é›†æˆ SDK" |
| `IMPLEMENT_FEATURE` | å®ç°åŠŸèƒ½ | "å¦‚ä½•å®ç°å·²è¯»å›æ‰§" |

**å®ä½“æŠ½å–** (P0 ä¼˜åŒ–):
- é”™è¯¯ç : `é”™è¯¯ç  508` â†’ `errorCode: 508`
- ç±»å: `MessageCell` â†’ `className: "MessageCell"`
- ç»„ä»¶: `EaseChatUIKit` â†’ `componentName: "EaseChatUIKit"`
- æ¶ˆæ¯ç±»å‹: `è®¢å•æ¶ˆæ¯` â†’ `messageName: "Order"`
- é…ç½®é¡¹: `primaryHue` â†’ `configProperty: "primaryHue"`

### QueryExpander (æŸ¥è¯¢æ‰©å±•)

**åŠŸèƒ½**: åŒä¹‰è¯æ‰©å±•æå‡å¬å›ç‡

**å†…ç½®åŒä¹‰è¯åº“** (90+ æ˜ å°„):

```typescript
// ç¤ºä¾‹æ˜ å°„
'æ¶ˆæ¯' â†” ['message', 'msg', 'ä¿¡æ¯', 'èŠå¤©']
'å‘é€' â†” ['send', 'å‘', 'æ¨é€', 'ä¼ é€']
'å¤´åƒ' â†” ['avatar', 'å¤´åƒ', 'ç”¨æˆ·å›¾ç‰‡', 'profile']
'èŠå¤©å®¤' â†” ['chatroom', 'room', 'ç›´æ’­é—´', 'æˆ¿é—´']
```

### KnowledgeGraph (çŸ¥è¯†å›¾è°±)

**åŠŸèƒ½**: ç±»å…³ç³»å’Œåœºæ™¯è§£å†³æ–¹æ¡ˆåº“

**åŒ…å«**:
- ç±»ç»§æ‰¿å…³ç³»
- åè®®å®ç°å…³ç³»
- å¸¸è§å¼€å‘åœºæ™¯çš„è§£å†³æ–¹æ¡ˆæ­¥éª¤
- ç±»çš„å…³é”®æ–¹æ³•å’Œå±æ€§è¯´æ˜

### CodeGenerator (ä»£ç ç”Ÿæˆ)

**åŠŸèƒ½**: æ ¹æ®åœºæ™¯ç”Ÿæˆ Swift ä»£ç æ¨¡æ¿

**æ”¯æŒåœºæ™¯**:
- `custom_message` - è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹
- `attachment_menu` - æ·»åŠ é™„ä»¶èœå•é¡¹
- `bubble_style` - æ°”æ³¡æ ·å¼å®šåˆ¶
- `theme_config` - ä¸»é¢˜é…ç½®
- `avatar_config` - å¤´åƒé…ç½®
- `long_press_menu` - é•¿æŒ‰èœå•

---

## æ€§èƒ½ä¼˜åŒ–

### ä¼˜åŒ–è·¯çº¿å›¾

| ä¼˜å…ˆçº§ | ä¼˜åŒ–é¡¹ | çŠ¶æ€ | æå‡æ•ˆæœ |
|--------|--------|------|----------|
| P0 | å®ä½“æŠ½å–å¢å¼º | âœ… | æå‡æ„å›¾è¯†åˆ«å‡†ç¡®ç‡ |
| P0 | æŸ¥è¯¢æ‰©å±• (åŒä¹‰è¯) | âœ… | å¬å›ç‡æå‡ 30%+ |
| P1 | å€’æ’ç´¢å¼• + BM25 | âœ… | æœç´¢é€Ÿåº¦ 37x æå‡ |
| P1 | TF-IDF åŠ æƒ | âœ… | æ’åºç›¸å…³æ€§æå‡ |
| P2 | æºç ç´¢å¼•åˆ†ç‰‡ | âœ… | é¦–æ¬¡åŠ è½½ 98% æ›´å¿« |

### æ€§èƒ½å¯¹æ¯”æ•°æ®

#### æ–‡æ¡£æœç´¢ (DocSearch)

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| æœç´¢å¤æ‚åº¦ | O(n) å…¨è¡¨æ‰«æ | O(k) è¯é¡¹æŸ¥æ‰¾ |
| å¹³å‡æœç´¢è€—æ—¶ | ~5ms | **0.086ms** |
| P95 å»¶è¿Ÿ | - | 0.218ms |

#### æºç æœç´¢ (ShardedSourceSearch)

| åœºæ™¯ | å…¨é‡æœç´¢ | åˆ†ç‰‡æœç´¢ | æå‡ |
|------|----------|----------|------|
| é¦–æ¬¡åŠ è½½ (æ¸…å•) | 23.65ms | 0.50ms | **98% æ›´å¿«** |
| å•ç»„ä»¶æœç´¢ (ç¼“å­˜å) | 9.76ms | 0.26ms | **37x æ›´å¿«** |
| å…¨ç»„ä»¶æœç´¢ (ç¼“å­˜å) | 9.76ms | 0.40ms | **24x æ›´å¿«** |

### åˆ†ç‰‡ç´¢å¼•ç»“æ„

```
data/sources/
â”œâ”€â”€ index.json           # åŸå§‹ç´¢å¼• (1.5MB) - ä¿ç•™å…¼å®¹
â”œâ”€â”€ manifest.json        # å…ƒæ•°æ®æ¸…å• (7KB) â† é¦–æ¬¡åªåŠ è½½è¿™ä¸ª
â””â”€â”€ shards/
    â”œâ”€â”€ EaseChatUIKit.json      (827KB, 179 æ–‡ä»¶, 2417 ç¬¦å·)
    â”œâ”€â”€ EaseChatroomUIKit.json  (320KB, 81 æ–‡ä»¶, 936 ç¬¦å·)
    â”œâ”€â”€ EaseCallUIKit.json      (256KB, 66 æ–‡ä»¶, 801 ç¬¦å·)
    â””â”€â”€ EaseChatDemo.json       (172KB, 53 æ–‡ä»¶, 541 ç¬¦å·)
```

---

## å®¢æˆ·ç«¯é…ç½®

### Claude Code / Claude Desktop

```json
// ~/.config/claude/claude_desktop_config.json
{
  "mcpServers": {
    "easeim": {
      "command": "npx",
      "args": ["-y", "easeim-mcp-server"]
    }
  }
}
```

### Cursor

```json
// .cursor/mcp.json
{
  "mcpServers": {
    "easeim": {
      "command": "npx",
      "args": ["-y", "easeim-mcp-server"]
    }
  }
}
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# ç¼–è¯‘
npm run build

# ç”Ÿæˆç´¢å¼•
npm run generate-all

# ç”Ÿæˆåˆ†ç‰‡ç´¢å¼•
npx tsx scripts/generate-shards.ts

# è¿è¡Œæµ‹è¯•
npx tsx tests/benchmark-search.ts
npx tsx tests/benchmark-sharded-search.ts
```

---

## å¼€å‘ç»´æŠ¤

### æ›´æ–°æ–‡æ¡£ç´¢å¼•

```bash
# æ›´æ–° API æ–‡æ¡£åé‡æ–°ç”Ÿæˆç´¢å¼•
npm run generate-docs-index
```

### æ›´æ–°æºç ç´¢å¼•

```bash
# 1. ä¸‹è½½/æ›´æ–° UIKit æºç åˆ° data/sources/ios/
# 2. ç”Ÿæˆç´¢å¼•
npm run generate-source-index

# 3. ç”Ÿæˆåˆ†ç‰‡ç´¢å¼•
npx tsx scripts/generate-shards.ts
```

### æ·»åŠ æ–°çš„ MCP å·¥å…·

1. åœ¨ `src/tools/index.ts` æ·»åŠ å·¥å…·å®šä¹‰
2. åœ¨ `src/server.ts` æ·»åŠ å¤„ç†å™¨
3. ç¼–è¯‘å¹¶æµ‹è¯•

### æ‰©å±•åŒä¹‰è¯åº“

ç¼–è¾‘ `src/intelligence/QueryExpander.ts`:

```typescript
private synonyms: Map<string, string[]> = new Map([
  ['æ–°è¯', ['synonym1', 'synonym2', ...]],
  // ...
]);
```

---

## æŠ€æœ¯äº®ç‚¹

1. **å¤šå±‚æ¬¡æœç´¢æ¶æ„** - æ–‡æ¡£ã€æºç ã€é…ç½®ä¸‰å¤§æœç´¢å¼•æ“ç‹¬ç«‹ä¼˜åŒ–
2. **æ™ºèƒ½æ„å›¾ç†è§£** - è‡ªç„¶è¯­è¨€ â†’ æ„å›¾åˆ†ç±» â†’ å®ä½“æŠ½å– â†’ è‡ªåŠ¨è·¯ç”±
3. **é«˜æ€§èƒ½å€’æ’ç´¢å¼•** - BM25 è¯„åˆ† + TF-IDF åŠ æƒ + å­—æ®µæƒé‡
4. **åˆ†ç‰‡ç´¢å¼•ç­–ç•¥** - æŒ‰éœ€åŠ è½½ + LRU ç¼“å­˜ + å¹¶è¡Œæœç´¢
5. **æŸ¥è¯¢æ‰©å±•** - 90+ é¢†åŸŸåŒä¹‰è¯ + ç¼©å†™å±•å¼€ + é©¼å³°æ‹†åˆ†
6. **æ­§ä¹‰æ£€æµ‹** - è‡ªåŠ¨æ£€æµ‹è·¨å¹³å°/ç»„ä»¶ç»“æœå¹¶æç¤ºç”¨æˆ·

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| 1.0.0 | 2025-01 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€å·¥å…·å®ç° |
| 1.1.0 | 2025-01 | P0 ä¼˜åŒ–ï¼šå®ä½“æŠ½å–ã€æŸ¥è¯¢æ‰©å±• |
| 1.2.0 | 2025-01 | P1 ä¼˜åŒ–ï¼šå€’æ’ç´¢å¼•ã€BM25 |
| 1.3.0 | 2025-01 | P2 ä¼˜åŒ–ï¼šæºç ç´¢å¼•åˆ†ç‰‡ |

---

## è”ç³»æ–¹å¼

- **GitHub**: [easemob/easeim-mcp-server](https://github.com/easemob)
- **é—®é¢˜åé¦ˆ**: Issues
- **ç¯ä¿¡å®˜ç½‘**: https://www.easemob.com
