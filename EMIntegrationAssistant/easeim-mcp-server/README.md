# ç¯ä¿¡ IM SDK MCP Server

æä¾›ç¯ä¿¡ IM SDK æ–‡æ¡£æŸ¥è¯¢ã€æºç æœç´¢ã€æ™ºèƒ½åŠ©æ‰‹å’Œé›†æˆè¯Šæ–­èƒ½åŠ›çš„ MCP Serverã€‚

## åŠŸèƒ½æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    easeim-mcp-server                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   æœç´¢å¼•æ“å±‚    â”‚  â”‚   æ™ºèƒ½åŒ–å±‚      â”‚  â”‚   è¯Šæ–­å±‚        â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚ â”‚
â”‚  â”‚ â€¢ æ–‡æ¡£æœç´¢      â”‚  â”‚ â€¢ æ„å›¾åˆ†ç±»      â”‚  â”‚ â€¢ é›†æˆæ£€æŸ¥      â”‚ â”‚
â”‚  â”‚ â€¢ æºç æœç´¢      â”‚  â”‚ â€¢ å®ä½“æå–      â”‚  â”‚ â€¢ é”™è¯¯è¯Šæ–­      â”‚ â”‚
â”‚  â”‚ â€¢ é…ç½®æœç´¢      â”‚  â”‚ â€¢ æŸ¥è¯¢æ‰©å±•      â”‚  â”‚ â€¢ Podfile æ£€æŸ¥  â”‚ â”‚
â”‚  â”‚ â€¢ åˆ†ç‰‡æœç´¢      â”‚  â”‚ â€¢ ä»£ç ç”Ÿæˆ      â”‚  â”‚ â€¢ æ£€æŸ¥æ¸…å•      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    æ ¸å¿ƒç®—æ³•å±‚                              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  BM25 è¯„åˆ† â€¢ å€’æ’ç´¢å¼• â€¢ LRU ç¼“å­˜ â€¢ æ­§ä¹‰æ£€æµ‹ â€¢ ä¸Šä¸‹æ–‡æ„ŸçŸ¥ â€¢ æ‹¼å†™çº é”™ â€¢ æœç´¢å»ºè®® â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## MCP å·¥å…·åˆ—è¡¨ï¼ˆ19 ä¸ªï¼‰

### åŸºç¡€å·¥å…·ï¼ˆ10 ä¸ªï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `lookup_error` | æŸ¥è¯¢é”™è¯¯ç å«ä¹‰ã€åŸå› å’Œè§£å†³æ–¹æ¡ˆ |
| `search_api` | æœç´¢ API æ–‡æ¡£ï¼Œæ”¯æŒå¹³å°/å±‚çº§è¿‡æ»¤ |
| `search_source` | æœç´¢ UIKit æºç ï¼Œæ”¯æŒç»„ä»¶è¿‡æ»¤ |
| `get_guide` | è·å–é›†æˆæŒ‡å—å’Œæœ€ä½³å®è·µ |
| `diagnose` | æ ¹æ®ç—‡çŠ¶è¯Šæ–­é”™è¯¯åŸå›  |
| `read_doc` | è¯»å–å®Œæ•´ API æ–‡æ¡£ |
| `read_source` | è¯»å–æºç æ–‡ä»¶ï¼ˆæ”¯æŒè¡ŒèŒƒå›´ï¼‰ |
| `list_config_options` | åˆ—å‡º Appearance é…ç½®é¡¹ |
| `get_extension_points` | è·å–å¯ç»§æ‰¿ç±»å’Œåè®® |
| `get_config_usage` | æŸ¥è¯¢é…ç½®é¡¹çš„ä½¿ç”¨è¯¦æƒ… |

### æ™ºèƒ½åŒ–å·¥å…·ï¼ˆ4 ä¸ªï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `smart_assist` | ğŸ§  è‡ªç„¶è¯­è¨€æ™ºèƒ½åŠ©æ‰‹ï¼Œ**æ”¯æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼Œè‡ªåŠ¨ç†è§£æ„å›¾å’Œè¿ç»­æ€§é—®é¢˜ |
| `generate_code` | ğŸ“ ä»£ç ç”Ÿæˆå™¨ï¼Œç”Ÿæˆå®Œæ•´ä»£ç æ¨¡æ¿ |
| `explain_class` | ğŸ“– ç±»è§£é‡Šå™¨ï¼Œè¯´æ˜ç»§æ‰¿å…³ç³»å’Œç”¨æ³• |
| `list_scenarios` | ğŸ“‹ åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„å¼€å‘åœºæ™¯ |

### é›†æˆè¯Šæ–­å·¥å…·ï¼ˆ5 ä¸ªï¼‰

| å·¥å…· | æè¿° |
|------|------|
| `check_integration` | ğŸ” æ£€æŸ¥ Podfile é…ç½®æ˜¯å¦ç¬¦åˆè¦æ±‚ |
| `diagnose_build_error` | ğŸ› ï¸ è¯Šæ–­ Xcode æ„å»ºé”™è¯¯ |
| `get_podfile_template` | ğŸ“„ è·å–æ¨èçš„ Podfile æ¨¡æ¿ |
| `get_integration_checklist` | âœ… è·å–å®Œæ•´é›†æˆæ£€æŸ¥æ¸…å• |
| `get_platform_requirements` | ğŸ“‹ æŸ¥è¯¢å¹³å°ç‰ˆæœ¬è¦æ±‚ |

---

## æŠ€æœ¯å®ç°

### ğŸ‰ æœ¬æ¬¡å®ç°çš„ä¸¤å¤§åŠŸèƒ½æ€»ç»“

| åŠŸèƒ½ | ä»£ç è¡Œæ•° | æµ‹è¯•è¦†ç›– | ç”¨æˆ·ä»·å€¼ |
|------|----------|----------|----------|
| æ‹¼å†™çº é”™ | ~550 è¡Œ | 28/28 âœ… | è‡ªåŠ¨çº æ­£è¾“å…¥é”™è¯¯ |
| æœç´¢å»ºè®® | ~350 è¡Œ | 6/6 âœ… | å¼•å¯¼ç”¨æˆ·æ‰¾åˆ°å†…å®¹ |

### æœç´¢ä¼˜åŒ–ç®—æ³•

æœ¬é¡¹ç›®é‡‡ç”¨å¤šå±‚æ¬¡æœç´¢ä¼˜åŒ–ç­–ç•¥ï¼ŒæŒ‰ä¼˜å…ˆçº§åˆ†ä¸º P0ã€P1ã€P2 ä¸‰ä¸ªé˜¶æ®µï¼š

#### P0: æ™ºèƒ½åŒ–åŸºç¡€

| ä¼˜åŒ–é¡¹ | å®ç° | æ•ˆæœ |
|--------|------|------|
| **å®ä½“æå–å¢å¼º** | æ­£åˆ™ + å…³é”®è¯åŒ¹é…ï¼Œæå–é”™è¯¯ç ã€ç±»åã€ç»„ä»¶åã€åŠŸèƒ½åç­‰ | å‡†ç¡®è¯†åˆ«ç”¨æˆ·æ„å›¾ä¸­çš„å…³é”®å®ä½“ |
| **æŸ¥è¯¢æ‰©å±•ï¼ˆåŒä¹‰è¯ï¼‰** | ä¸­è‹±æ–‡åŒä¹‰è¯åº“ + é¢†åŸŸæœ¯è¯­æ˜ å°„ | "æ¶ˆæ¯"â†’"message,msg,chat" æ‰©å±•æœç´¢èŒƒå›´ |
| **æ„å›¾åˆ†ç±»** | åŸºäºå…³é”®è¯å’Œæ¨¡å¼çš„å¤šæ„å›¾åˆ†ç±»å™¨ | è¯†åˆ« 10+ ç§ç”¨æˆ·æ„å›¾ï¼ˆä¿®å¤é”™è¯¯ã€å®šåˆ¶UIç­‰ï¼‰|

```typescript
// æŸ¥è¯¢æ‰©å±•ç¤ºä¾‹
"å‘é€æ¶ˆæ¯" â†’ ["å‘é€", "æ¶ˆæ¯", "send", "message", "msg", "chat"]
"æ°”æ³¡é¢œè‰²" â†’ ["æ°”æ³¡", "é¢œè‰²", "bubble", "color", "èƒŒæ™¯è‰²"]
```

#### P0.5: æ‹¼å†™çº é”™ (SpellCorrector)

| ä¼˜åŒ–é¡¹ | å®ç° | æ•ˆæœ |
|--------|------|------|
| **Levenshtein è·ç¦»** | ç¼–è¾‘è·ç¦»ç®—æ³•ï¼Œæ”¯æŒæœ€å¤§è·ç¦» 2 | è‡ªåŠ¨çº æ­£å¸¸è§æ‹¼å†™é”™è¯¯ |
| **é¢†åŸŸè¯å…¸** | 242+ ç¯ä¿¡ SDK ä¸“ä¸šæœ¯è¯­ | é«˜å‡†ç¡®ç‡çš„é¢†åŸŸçº é”™ |
| **è¯é¢‘åŠ æƒ** | é«˜é¢‘è¯ä¼˜å…ˆåŒ¹é… | message > msg ä¼˜å…ˆçº§æ›´é«˜ |
| **é©¼å³°æ‹†åˆ†** | è‡ªåŠ¨ä»ç±»åæå–è¯æ±‡ | åŠ¨æ€æ‰©å±•è¯å…¸ |

```typescript
// æ‹¼å†™çº é”™ç¤ºä¾‹
"mesage bubble"  â†’ "message bubble"   âœ… è‡ªåŠ¨çº æ­£
"avater style"   â†’ "avatar style"     âœ… è‡ªåŠ¨çº æ­£
"custum cell"    â†’ "custom cell"      âœ… è‡ªåŠ¨çº æ­£
"converstion"    â†’ "conversation"     âœ… è‡ªåŠ¨çº æ­£

// è¿”å›ç»“æœåŒ…å«çº æ­£æç¤º
{
  results: [...],
  spellCorrection: {
    originalQuery: "mesage bubble",
    correctedQuery: "message bubble",
    suggestion: "å·²è‡ªåŠ¨çº æ­£: \"mesage\" â†’ \"message\""
  }
}
```

#### P0.6: æœç´¢å»ºè®® (SearchSuggester)

| ä¼˜åŒ–é¡¹ | å®ç° | æ•ˆæœ |
|--------|------|------|
| **ç»“æœä¸ºç©ºæ—¶** | æ¨èçƒ­é—¨æœç´¢è¯ | å¼•å¯¼ç”¨æˆ·å‘ç°å†…å®¹ |
| **ç»“æœå¤ªå°‘æ—¶** | æ¨èç›¸å…³æœç´¢ | æ‰©å±•æœç´¢èŒƒå›´ |
| **ç»“æœå¤ªå¤šæ—¶** | æŒ‰ç±»åˆ«åˆ†ç»„å»ºè®® | å¸®åŠ©ç”¨æˆ·ç¼©å°èŒƒå›´ |
| **æ™ºèƒ½ç›¸å…³æ¨è** | åŸºäºç»“æœæ¨æ–­ç”¨æˆ·æ„å›¾ | MessageCell â†’ CustomMessageCell |

```typescript
// æœç´¢å»ºè®®ç¤ºä¾‹

// åœºæ™¯1: ç»“æœä¸ºç©º
æœç´¢ "xyz123" â†’ {
  results: [],
  suggestion: {
    type: 'popular',
    message: 'æœªæ‰¾åˆ°åŒ¹é…ç»“æœï¼Œæ‚¨å¯èƒ½æƒ³æœç´¢ï¼š',
    alternatives: ['message', 'conversation', 'chat']
  }
}

// åœºæ™¯2: ç»“æœå¤ªå°‘ï¼ˆ<3ä¸ªï¼‰
æœç´¢ "MessageCell" â†’ {
  results: [MessageCell, MessageEntity],
  suggestion: {
    type: 'related',
    message: 'æ‰¾åˆ° 2 ä¸ªç»“æœï¼Œæ‚¨å¯èƒ½è¿˜æƒ³æœç´¢ï¼š',
    alternatives: ['CustomMessageCell', 'MessageController']
  }
}

// åœºæ™¯3: ç»“æœå¤ªå¤šï¼ˆ>20ä¸ªï¼‰
æœç´¢ "cell" â†’ {
  results: [25+ items],
  suggestion: {
    type: 'clarify',
    message: 'æ‰¾åˆ° 25+ ä¸ªç»“æœï¼Œå»ºè®®æŒ‰ç±»åˆ«ç¼©å°èŒƒå›´ï¼š',
    alternatives: [
      'æ¶ˆæ¯ç›¸å…³ (7 ä¸ª)',
      'è”ç³»äººç›¸å…³ (5 ä¸ª)',
      'ä¼šè¯ç›¸å…³ (5 ä¸ª)'
    ]
  }
}
```

#### P1: å€’æ’ç´¢å¼• + BM25 è¯„åˆ†

| ä¼˜åŒ–é¡¹ | å®ç° | æ•ˆæœ |
|--------|------|------|
| **å€’æ’ç´¢å¼•** | è¯é¡¹ â†’ æ–‡æ¡£IDåˆ—è¡¨ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ | O(1) æ—¶é—´å¤æ‚åº¦å®šä½å€™é€‰æ–‡æ¡£ |
| **BM25 è¯„åˆ†** | è€ƒè™‘è¯é¢‘ã€æ–‡æ¡£é•¿åº¦ã€IDF | æ¯” TF-IDF æ›´å‡†ç¡®çš„ç›¸å…³æ€§æ’åº |
| **å­—æ®µæƒé‡** | className(4.0) > symbolName(3.0) > path(2.5) > description(1.5) | ç±»ååŒ¹é…ä¼˜å…ˆäºæè¿°åŒ¹é… |
| **æ­§ä¹‰æ£€æµ‹** | æ£€æµ‹å¤šå¹³å°/å¤šç»„ä»¶ç»“æœï¼Œæç¤ºç”¨æˆ·è¿‡æ»¤ | å‡å°‘ç”¨æˆ·å›°æƒ‘ï¼Œæé«˜æœç´¢ç²¾åº¦ |

```typescript
// BM25 è¯„åˆ†å…¬å¼
score = Î£ IDF(qi) Ã— (f(qi,D) Ã— (k1+1)) / (f(qi,D) + k1 Ã— (1-b+bÃ—|D|/avgdl))

// å‚æ•°é…ç½®
k1 = 1.2  // è¯é¢‘é¥±å’Œå‚æ•°
b = 0.75  // æ–‡æ¡£é•¿åº¦å½’ä¸€åŒ–å‚æ•°
```

#### P2: æºç åˆ†ç‰‡ç´¢å¼•ï¼ˆæŒ‰ç»„ä»¶ï¼‰

| ä¼˜åŒ–é¡¹ | å®ç° | æ•ˆæœ |
|--------|------|------|
| **åˆ†ç‰‡åŠ è½½** | æŒ‰ç»„ä»¶æ‹†åˆ†ç´¢å¼•æ–‡ä»¶ | é¦–æ¬¡åŠ è½½ 98% æ›´å¿«ï¼ˆ0.5ms vs 23msï¼‰|
| **LRU ç¼“å­˜** | æœ€å¤šç¼“å­˜ 4 ä¸ªåˆ†ç‰‡ï¼Œè‡ªåŠ¨æ·˜æ±° | å†…å­˜å ç”¨å¯æ§ |
| **å¹¶è¡Œæœç´¢** | å¤šåˆ†ç‰‡å¹¶è¡Œæœç´¢ | å…¨ç»„ä»¶æœç´¢ä»ä¿æŒé«˜æ€§èƒ½ |
| **é©¼å³°æ‹†åˆ†** | "MessageBubble" â†’ "message bubble" | æé«˜ç±»åæœç´¢å‡†ç¡®ç‡ |

```
ç´¢å¼•ç»“æ„:
data/sources/
â”œâ”€â”€ manifest.json        (7 KB)     # æ¸…å•æ–‡ä»¶
â””â”€â”€ shards/
    â”œâ”€â”€ EaseChatUIKit.json   (827 KB)
    â”œâ”€â”€ EaseCallUIKit.json   (256 KB)
    â”œâ”€â”€ EaseChatroomUIKit.json (320 KB)
    â””â”€â”€ EaseChatDemo.json    (172 KB)
```

#### P3: å¹³å°åˆ†ç‰‡ç´¢å¼•ï¼ˆæŒ‰å¹³å°ï¼‰

| ä¼˜åŒ–é¡¹ | å®ç° | æ•ˆæœ |
|--------|------|------|
| **æ–‡æ¡£å¹³å°åˆ†ç‰‡** | æŒ‰ iOS/Android ç­‰å¹³å°æ‹†åˆ†æ–‡æ¡£ç´¢å¼• | å¯åŠ¨å†…å­˜èŠ‚çœ 99% |
| **é…ç½®å¹³å°åˆ†ç‰‡** | æŒ‰å¹³å°æ‹†åˆ†é…ç½®ç´¢å¼• | å¯åŠ¨å†…å­˜èŠ‚çœ 99.1% |
| **LRU å¹³å°ç¼“å­˜** | æœ€å¤šç¼“å­˜ 4 ä¸ªå¹³å°åˆ†ç‰‡ | æ”¯æŒ 10+ å¹³å°æ— å‹åŠ› |
| **æ™ºèƒ½å¹³å°æ£€æµ‹** | æ ¹æ®æŸ¥è¯¢å…³é”®è¯è‡ªåŠ¨è¯†åˆ«ç›®æ ‡å¹³å° | æ— éœ€æ‰‹åŠ¨æŒ‡å®šå¹³å° |
| **é”™è¯¯ç å…±äº«** | é”™è¯¯ç ç‹¬ç«‹åˆ†ç‰‡ï¼Œè·¨å¹³å°å…±äº« | é¿å…é‡å¤å­˜å‚¨ |

```
ç´¢å¼•ç»“æ„:
data/docs/
â”œâ”€â”€ manifest.json           (1.17 KB)   # æ¸…å•æ–‡ä»¶
â””â”€â”€ shards/
    â”œâ”€â”€ ios.json            (32.66 KB)  # iOS å¹³å°åˆ†ç‰‡
    â”œâ”€â”€ android.json        (46.05 KB)  # Android å¹³å°åˆ†ç‰‡
    â””â”€â”€ error-codes.json    (45.99 KB)  # å…±äº«é”™è¯¯ç 

data/configs/
â”œâ”€â”€ manifest.json           (0.61 KB)   # æ¸…å•æ–‡ä»¶
â””â”€â”€ shards/
    â””â”€â”€ ios.json            (66.11 KB)  # iOS é…ç½®åˆ†ç‰‡
```

**æ€§èƒ½å¯¹æ¯”ï¼š**

| æ•°æ®ç±»å‹ | åŸå§‹å¤§å° | Manifest å¤§å° | å¯åŠ¨å†…å­˜èŠ‚çœ |
|----------|----------|---------------|--------------|
| æ–‡æ¡£ç´¢å¼• | 120.92 KB | 1.17 KB | **99.0%** |
| é…ç½®ç´¢å¼• | 66.11 KB | 0.61 KB | **99.1%** |

**ä½¿ç”¨æ–¹å¼ï¼š**

```typescript
// æ¨èä½¿ç”¨åˆ†ç‰‡ç‰ˆæœ¬
import { ShardedDocSearch, ShardedConfigSearch } from './search/index.js';

const docSearch = new ShardedDocSearch(4);  // æœ€å¤šç¼“å­˜4ä¸ªå¹³å°
const configSearch = new ShardedConfigSearch(4);

// è‡ªåŠ¨æ£€æµ‹å¹³å°
const results = docSearch.searchApi('å‘é€æ¶ˆæ¯');

// æŒ‡å®šå¹³å°
const iosResults = docSearch.searchApi('æ¶ˆæ¯', { platform: 'ios' });

// é¢„åŠ è½½å¸¸ç”¨å¹³å°
docSearch.preload(['ios', 'android']);
```

### æ€§èƒ½åŸºå‡†æµ‹è¯•

```
============================================================
åˆ†ç‰‡æœç´¢ vs å…¨é‡æœç´¢ æ€§èƒ½å¯¹æ¯”
============================================================

é¦–æ¬¡åŠ è½½:
   å…¨é‡ç´¢å¼•:    23.65ms
   åˆ†ç‰‡æ¸…å•:    0.50ms (98% æ›´å¿«)

å•ç»„ä»¶æœç´¢ (EaseChatUIKit):
   å…¨é‡æœç´¢:    9.756ms
   åˆ†ç‰‡æœç´¢:    0.263ms (37x æ›´å¿«)

å…¨ç»„ä»¶æœç´¢ (all):
   å…¨é‡æœç´¢:    9.756ms
   åˆ†ç‰‡æœç´¢:    0.396ms (24x æ›´å¿«)
```

### æ™ºèƒ½åŒ–æ¨¡å—

#### æ„å›¾åˆ†ç±»å™¨ (IntentClassifier)

æ”¯æŒè¯†åˆ«ä»¥ä¸‹ç”¨æˆ·æ„å›¾ï¼š

| æ„å›¾ | è§¦å‘ç¤ºä¾‹ |
|------|----------|
| `FIX_ERROR` | "é”™è¯¯ç  508 æ€ä¹ˆè§£å†³"ã€"ç™»å½•å¤±è´¥" |
| `CUSTOMIZE_MESSAGE` | "è‡ªå®šä¹‰è®¢å•æ¶ˆæ¯"ã€"æ·»åŠ å¡ç‰‡æ¶ˆæ¯" |
| `ADD_MENU_ITEM` | "æ·»åŠ å‘é€ä½ç½®èœå•"ã€"å¢åŠ é™„ä»¶ç±»å‹" |
| `CUSTOMIZE_UI` | "ä¿®æ”¹æ°”æ³¡é¢œè‰²"ã€"è‡ªå®šä¹‰å¤´åƒæ ·å¼" |
| `UNDERSTAND_CLASS` | "MessageCell æ˜¯ä»€ä¹ˆ"ã€"å¦‚ä½•ç»§æ‰¿" |
| `INTEGRATE_SDK` | "å¦‚ä½•é›†æˆ"ã€"å¿«é€Ÿå¼€å§‹" |
| `IMPLEMENT_FEATURE` | "å¦‚ä½•å®ç°å·²è¯»å›æ‰§"ã€"æ€ä¹ˆå‘é€å›¾ç‰‡" |

#### çŸ¥è¯†å›¾è°± (KnowledgeGraph)

å­˜å‚¨ç±»çš„ç»§æ‰¿å…³ç³»ã€ä½¿ç”¨åœºæ™¯ã€å…³é”®æ–¹æ³•ç­‰ç»“æ„åŒ–çŸ¥è¯†ï¼š

```typescript
// ç±»ä¿¡æ¯ç¤ºä¾‹
{
  name: "CustomMessageCell",
  description: "è‡ªå®šä¹‰æ¶ˆæ¯ Cell åŸºç±»",
  superclass: "MessageCell",
  protocols: ["MessageCellProtocol"],
  keyMethods: ["createContent()", "refresh(entity:)"],
  usageScenarios: ["custom_message"]
}
```

#### ä»£ç ç”Ÿæˆå™¨ (CodeGenerator)

æ”¯æŒçš„ä»£ç æ¨¡æ¿ï¼š

| æ¨¡æ¿ | æè¿° |
|------|------|
| `custom_message` | è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹å®Œæ•´å®ç° |
| `attachment_menu` | æ·»åŠ é™„ä»¶èœå•é¡¹ |
| `bubble_style` | æ°”æ³¡æ ·å¼å®šåˆ¶ |
| `theme_config` | ä¸»é¢˜é¢œè‰²é…ç½® |
| `avatar_config` | å¤´åƒæ ·å¼é…ç½® |
| `long_press_menu` | é•¿æŒ‰èœå•å®šåˆ¶ |

#### ä¸Šä¸‹æ–‡ç®¡ç†å™¨ (ContextManager)

æ”¯æŒä¸Šä¸‹æ–‡æ„ŸçŸ¥æœç´¢ï¼Œè‡ªåŠ¨è®°ä½å¯¹è¯å†å²ï¼Œè¯†åˆ«è¿ç»­æ€§é—®é¢˜ï¼š

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **ä¼šè¯ç®¡ç†** | æ”¯æŒå¤šä¼šè¯ï¼ˆé€šè¿‡ session_idï¼‰ï¼Œ30 åˆ†é’Ÿè¶…æ—¶è‡ªåŠ¨æ¸…ç† |
| **è¿ç»­æ€§æ£€æµ‹** | è¯†åˆ« "æ›´å¤šç»†èŠ‚"ã€"ç»§ç»­"ã€"ç„¶åå‘¢" ç­‰åç»­é—®é¢˜ |
| **æŸ¥è¯¢å¢å¼º** | è‡ªåŠ¨ä¸ºæ¨¡ç³ŠæŸ¥è¯¢æ·»åŠ ä¸Šä¸‹æ–‡ |
| **æ™ºèƒ½æ¨è** | åŸºäºå½“å‰è¯é¢˜æ¨èç›¸å…³å†…å®¹ |

**è¿ç»­æ€§ç±»å‹ï¼š**

| ç±»å‹ | è§¦å‘ç¤ºä¾‹ |
|------|----------|
| `more_detail` | "æ›´å¤š"ã€"è¯¦ç»†"ã€"ç»§ç»­"ã€"continue"ã€"more details" |
| `follow_up` | "é‚£æ€ä¹ˆåŠ"ã€"ç„¶åå‘¢"ã€"æ¥ä¸‹æ¥"ã€"what's next" |
| `related` | "ç±»ä¼¼çš„"ã€"ç›¸å…³çš„"ã€"è¿˜æœ‰å…¶ä»–"ã€"similar" |

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```
ä¼šè¯ 1:
  ğŸ‘¤ "é”™è¯¯ç  508 æ€ä¹ˆè§£å†³"  â†’ è¯é¢˜: é”™è¯¯å¤„ç†, ç„¦ç‚¹: 508
  ğŸ‘¤ "æ›´å¤šç»†èŠ‚"            â†’ è‡ªåŠ¨å¢å¼ºä¸º "æ›´å¤šç»†èŠ‚ (å…³äºé”™è¯¯ç  508)"
  ğŸ‘¤ "ç±»ä¼¼çš„é”™è¯¯æœ‰å“ªäº›"     â†’ è¯†åˆ«ä¸º relatedï¼Œæ¨èç›¸å…³é”™è¯¯ç 

ä¼šè¯ 2 (ç‹¬ç«‹):
  ğŸ‘¤ "æ€ä¹ˆè‡ªå®šä¹‰è®¢å•æ¶ˆæ¯"   â†’ è¯é¢˜: æ¶ˆæ¯, ç„¦ç‚¹: æ¶ˆæ¯
  ğŸ‘¤ "ç„¶åæ€ä¹ˆæ³¨å†Œ"        â†’ è¯†åˆ«ä¸º follow_upï¼Œä¿æŒæ¶ˆæ¯è¯é¢˜
```

### é›†æˆè¯Šæ–­çŸ¥è¯†åº“

#### å¹³å°è¦æ±‚

| ç»„ä»¶ | iOS ç‰ˆæœ¬ | Xcode ç‰ˆæœ¬ | CocoaPods ç‰ˆæœ¬ |
|------|----------|------------|----------------|
| EaseChatUIKit | 15.0+ | 16.0+ | 1.14.3+ |
| EaseCallUIKit | 15.0+ | 16.0+ | 1.14.3+ |
| EaseChatroomUIKit | 13.0+ | 15.0+ | 1.14.3+ |
| EaseIMKit | 13.0+ | 15.0+ | 1.14.3+ |

#### å·²çŸ¥é—®é¢˜è¯Šæ–­ï¼ˆ10 ä¸ªï¼‰

| é—®é¢˜ | ä¼˜å…ˆçº§ | è§¦å‘å…³é”®è¯ |
|------|--------|------------|
| Podfile iOS ç‰ˆæœ¬è¿‡ä½ | ğŸ”´ Critical | `platform`, `deployment target` |
| rsync æ²™ç›’é”™è¯¯ | ğŸ”´ Critical | `rsync`, `sandbox`, `deny` |
| æƒé™é…ç½®ç¼ºå¤± | ğŸ”´ Critical | `NSCameraUsageDescription`, `privacy` |
| ç¯ä¿¡æœåŠ¡æœªå¼€é€š | ğŸ”´ Critical | `appkey`, `RTC`, `service not enabled` |
| CocoaPods ç‰ˆæœ¬é—®é¢˜ | ğŸŸ  High | `PBXFileSystemSynchronizedRootGroup` |
| Xcode ç‰ˆæœ¬å…¼å®¹ | ğŸŸ  High | `project format`, `cannot be opened` |
| Swift ç‰ˆæœ¬ä¸åŒ¹é… | ğŸŸ  High | `SWIFT_VERSION`, `module compiled` |
| Framework æœªæ‰¾åˆ° | ğŸŸ  High | `framework not found`, `No such module` |
| æ¨¡æ‹Ÿå™¨æ¶æ„é—®é¢˜ | ğŸŸ¡ Medium | `simulator`, `arm64`, `Rosetta` |
| Bitcode é—®é¢˜ | ğŸŸ¡ Medium | `ENABLE_BITCODE`, `bitcode` |

---

## å®‰è£…

```bash
npm install -g easeim-mcp-server
```

æˆ–æœ¬åœ°å¼€å‘ï¼š

```bash
cd easeim-mcp-server
npm install
npm run build
```

## é…ç½®

### Claude Code / Claude Desktop

ç¼–è¾‘ `~/.config/claude/claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "easeim": {
      "command": "node",
      "args": ["/path/to/easeim-mcp-server/dist/index.js"]
    }
  }
}
```

### Cursor

åˆ›å»º `.cursor/mcp.json`:

```json
{
  "mcpServers": {
    "easeim": {
      "command": "node",
      "args": ["/path/to/easeim-mcp-server/dist/index.js"]
    }
  }
}
```

## ä½¿ç”¨ç¤ºä¾‹

### æ™ºèƒ½åŠ©æ‰‹ï¼ˆæ¨èï¼‰

```
> æˆ‘æƒ³è‡ªå®šä¹‰ä¸€ä¸ªè®¢å•æ¶ˆæ¯

Claude: [è°ƒç”¨ smart_assist]

ğŸ§  æ™ºèƒ½åŠ©æ‰‹åˆ†æ
è¯†åˆ«æ„å›¾: è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ (ç½®ä¿¡åº¦: 95%)
æå–çš„å…³é”®ä¿¡æ¯: æ¶ˆæ¯ç±»å‹: Order

## å®ç°æ­¥éª¤
1. åˆ›å»ºè‡ªå®šä¹‰ Cell ç±»ç»§æ‰¿ CustomMessageCell
2. å®ç° createContent() è¿”å›è‡ªå®šä¹‰è§†å›¾
3. åœ¨ ComponentsRegister ä¸­æ³¨å†Œ
4. åˆ›å»ºå¹¶å‘é€ ChatCustomMessageBody

## å®Œæ•´ä»£ç 
```swift
// OrderMessageCell.swift
class OrderMessageCell: CustomMessageCell {
    ...
}
```
```

### æ„å»ºé”™è¯¯è¯Šæ–­

```
> rsync.samba deny file-write-create æ€ä¹ˆè§£å†³

Claude: [è°ƒç”¨ diagnose_build_error]

ğŸ› ï¸ æ„å»ºé”™è¯¯è¯Šæ–­
ä¼˜å…ˆçº§: ğŸ”´ critical
åŸå› : Xcode 15 é»˜è®¤å¯ç”¨äº†è„šæœ¬æ²™ç›’

è§£å†³æ–¹æ¡ˆ:
1. Build Settings â†’ User Script Sandboxing â†’ NO
2. æˆ–åœ¨ Podfile post_install ä¸­æ·»åŠ :
   config.build_settings['ENABLE_USER_SCRIPT_SANDBOXING'] = 'NO'
```

### é›†æˆæ£€æŸ¥

```
> æ£€æŸ¥æˆ‘çš„ Podfile æ˜¯å¦æ­£ç¡®

Claude: [è°ƒç”¨ check_integration]

ğŸ” EaseChatUIKit é›†æˆé…ç½®æ£€æŸ¥

âŒ å‘ç°é—®é¢˜:
1. iOS éƒ¨ç½²ç›®æ ‡ç‰ˆæœ¬è¿‡ä½: 13.0ï¼Œè¦æ±‚ 15.0+
2. ç¼ºå°‘ use_frameworks! å£°æ˜

ğŸ’¡ ä¼˜åŒ–å»ºè®®:
1. æ·»åŠ  IPHONEOS_DEPLOYMENT_TARGET = '15.0'
2. æ·»åŠ  ENABLE_USER_SCRIPT_SANDBOXING = 'NO'
```

## æ•°æ®ç»Ÿè®¡

### æ–‡æ¡£ç´¢å¼•
- API æ¨¡å—: 49 ä¸ª
- API æ€»æ•°: 56 ä¸ª
- é”™è¯¯ç : 99+ ä¸ª

### æºç ç´¢å¼•
- ç»„ä»¶æ•°: 3 ä¸ª
- æºæ–‡ä»¶: 326 ä¸ª
- ä»£ç ç¬¦å·: 2605 ä¸ª
  - ç±»: 56 ä¸ª
  - æ–¹æ³•: 1644 ä¸ª
  - å±æ€§: 816 ä¸ª

### çŸ¥è¯†åº“
- å·²çŸ¥é›†æˆé—®é¢˜: 10 ä¸ª
- ä»£ç æ¨¡æ¿: 6+ ä¸ª
- ç±»ä¿¡æ¯: 20+ ä¸ª

## é¡¹ç›®ç»“æ„

```text
easeim-mcp-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ server.ts                   # MCP Server å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ search/                     # æœç´¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ index.ts                # æœç´¢æ¨¡å—å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ DocSearch.ts            # æ–‡æ¡£æœç´¢ï¼ˆå…¨é‡åŠ è½½ï¼Œå‘åå…¼å®¹ï¼‰
â”‚   â”‚   â”œâ”€â”€ ShardedDocSearch.ts     # åˆ†ç‰‡æ–‡æ¡£æœç´¢ï¼ˆæŒ‰å¹³å°ï¼Œæ¨èï¼‰
â”‚   â”‚   â”œâ”€â”€ SourceSearch.ts         # æºç æœç´¢ï¼ˆå…¨é‡åŠ è½½ï¼‰
â”‚   â”‚   â”œâ”€â”€ ShardedSourceSearch.ts  # åˆ†ç‰‡æºç æœç´¢ï¼ˆæŒ‰ç»„ä»¶ï¼Œæ¨èï¼‰
â”‚   â”‚   â”œâ”€â”€ ConfigSearch.ts         # é…ç½®æœç´¢ï¼ˆå…¨é‡åŠ è½½ï¼‰
â”‚   â”‚   â”œâ”€â”€ ShardedConfigSearch.ts  # åˆ†ç‰‡é…ç½®æœç´¢ï¼ˆæŒ‰å¹³å°ï¼Œæ¨èï¼‰
â”‚   â”‚   â”œâ”€â”€ InvertedIndex.ts        # å€’æ’ç´¢å¼•å®ç°
â”‚   â”‚   â””â”€â”€ AmbiguityDetector.ts    # æ­§ä¹‰æ£€æµ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ intelligence/               # æ™ºèƒ½åŒ–æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ IntentClassifier.ts     # æ„å›¾åˆ†ç±»å™¨
â”‚   â”‚   â”œâ”€â”€ QueryExpander.ts        # æŸ¥è¯¢æ‰©å±•
â”‚   â”‚   â”œâ”€â”€ SpellCorrector.ts       # æ‹¼å†™çº é”™å™¨
â”‚   â”‚   â”œâ”€â”€ SearchSuggester.ts      # æœç´¢å»ºè®®ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ KnowledgeGraph.ts       # çŸ¥è¯†å›¾è°±
â”‚   â”‚   â”œâ”€â”€ CodeGenerator.ts        # ä»£ç ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ SimilarityMatcher.ts    # ç›¸ä¼¼åº¦åŒ¹é…
â”‚   â”‚   â”œâ”€â”€ ContextManager.ts       # ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆä¼šè¯ã€è¿ç»­æ€§ï¼‰
â”‚   â”‚   â””â”€â”€ IntegrationGuide.ts     # é›†æˆè¯Šæ–­çŸ¥è¯†åº“
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                      # MCP Tools å®šä¹‰
â”‚   â””â”€â”€ types/                      # ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ docs/                       # æ–‡æ¡£ç´¢å¼•ï¼ˆæŒ‰å¹³å°åˆ†ç‰‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ manifest.json           # æ–‡æ¡£æ¸…å•
â”‚   â”‚   â”œâ”€â”€ index.json              # å®Œæ•´ç´¢å¼•ï¼ˆå‘åå…¼å®¹ï¼‰
â”‚   â”‚   â””â”€â”€ shards/                 # å¹³å°åˆ†ç‰‡
â”‚   â”‚       â”œâ”€â”€ ios.json
â”‚   â”‚       â”œâ”€â”€ android.json
â”‚   â”‚       â””â”€â”€ error-codes.json
â”‚   â”œâ”€â”€ configs/                    # é…ç½®ç´¢å¼•ï¼ˆæŒ‰å¹³å°åˆ†ç‰‡ï¼‰
â”‚   â”‚   â”œâ”€â”€ manifest.json           # é…ç½®æ¸…å•
â”‚   â”‚   â”œâ”€â”€ index.json              # å®Œæ•´ç´¢å¼•ï¼ˆå‘åå…¼å®¹ï¼‰
â”‚   â”‚   â””â”€â”€ shards/
â”‚   â”‚       â””â”€â”€ ios.json
â”‚   â””â”€â”€ sources/                    # æºç ç´¢å¼•ï¼ˆæŒ‰ç»„ä»¶åˆ†ç‰‡ï¼‰
â”‚       â”œâ”€â”€ manifest.json
â”‚       â””â”€â”€ shards/
â”‚
â”œâ”€â”€ scripts/                        # ç´¢å¼•ç”Ÿæˆè„šæœ¬
â”‚   â”œâ”€â”€ generate-docs-index.ts      # æ–‡æ¡£ç´¢å¼•ç”Ÿæˆ
â”‚   â”œâ”€â”€ generate-source-index.ts    # æºç ç´¢å¼•ç”Ÿæˆ
â”‚   â”œâ”€â”€ generate-shards.ts          # æºç åˆ†ç‰‡ç”Ÿæˆï¼ˆæŒ‰ç»„ä»¶ï¼‰
â”‚   â”œâ”€â”€ generate-doc-shards.ts      # æ–‡æ¡£åˆ†ç‰‡ç”Ÿæˆï¼ˆæŒ‰å¹³å°ï¼‰
â”‚   â””â”€â”€ generate-config-shards.ts   # é…ç½®åˆ†ç‰‡ç”Ÿæˆï¼ˆæŒ‰å¹³å°ï¼‰
â”‚
â”œâ”€â”€ tests/                          # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ benchmark-sharded-search.ts
â”‚   â”œâ”€â”€ test-integration-guide.ts
â”‚   â”œâ”€â”€ test-spell-corrector.ts     # æ‹¼å†™çº é”™æµ‹è¯•
â”‚   â””â”€â”€ test-search-suggester.ts    # æœç´¢å»ºè®®æµ‹è¯•
â”‚
â””â”€â”€ docs/
    â””â”€â”€ TECHNICAL_OVERVIEW.md       # æŠ€æœ¯æ–‡æ¡£
```

## å¼€å‘

### ç”Ÿæˆç´¢å¼•

```bash
# ç”Ÿæˆæ–‡æ¡£ç´¢å¼•
npm run generate-docs-index

# ç”Ÿæˆæºç ç´¢å¼•
npm run generate-source-index

# ç”Ÿæˆæºç åˆ†ç‰‡ç´¢å¼•ï¼ˆæŒ‰ç»„ä»¶ï¼‰
npx tsx scripts/generate-shards.ts

# ç”Ÿæˆæ–‡æ¡£åˆ†ç‰‡ç´¢å¼•ï¼ˆæŒ‰å¹³å°ï¼‰
npx tsx scripts/generate-doc-shards.ts

# ç”Ÿæˆé…ç½®åˆ†ç‰‡ç´¢å¼•ï¼ˆæŒ‰å¹³å°ï¼‰
npx tsx scripts/generate-config-shards.ts

# ç”Ÿæˆæ‰€æœ‰ç´¢å¼•
npm run generate-all
```

### æ·»åŠ æ–°å¹³å°

å½“éœ€è¦æ”¯æŒæ–°å¹³å°ï¼ˆå¦‚ Flutterã€Webã€Unityï¼‰æ—¶ï¼š

**1. æ–‡æ¡£ç´¢å¼•**
```bash
# 1. ç¼–è¾‘ data/docs/index.jsonï¼Œæ·»åŠ æ–°å¹³å°çš„ guides å’Œ apiModules
#    ç¡®ä¿æ¯ä¸ªæ¡ç›®çš„ platform å­—æ®µè®¾ä¸ºæ­£ç¡®çš„å¹³å°æ ‡è¯†

# 2. é‡æ–°ç”Ÿæˆåˆ†ç‰‡
npx tsx scripts/generate-doc-shards.ts
```

**2. é…ç½®ç´¢å¼•**
```bash
# 1. ç¼–è¾‘ data/configs/index.jsonï¼Œæ·»åŠ æ–°å¹³å°ç»„ä»¶
#    ç¡®ä¿æ–‡ä»¶è·¯å¾„ä»¥å¹³å°åå¼€å¤´ï¼Œå¦‚ "flutter/EaseChatUIKit/..."

# 2. å¦‚éœ€æ”¯æŒæ–°å¹³å°åï¼Œç¼–è¾‘ scripts/generate-config-shards.ts:
#    if (['ios', 'android', 'flutter', 'web', 'unity'].includes(platform))

# 3. é‡æ–°ç”Ÿæˆåˆ†ç‰‡
npx tsx scripts/generate-config-shards.ts
```

åˆ†ç‰‡ç”Ÿæˆåï¼Œæœç´¢å¼•æ“ä¼šè‡ªåŠ¨è¯†åˆ«æ–°å¹³å°ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚

### è¿è¡Œæµ‹è¯•

```bash
# æ€§èƒ½åŸºå‡†æµ‹è¯•
npx tsx tests/benchmark-sharded-search.ts

# é›†æˆè¯Šæ–­æµ‹è¯•
npx tsx tests/test-integration-guide.ts

# æ‹¼å†™çº é”™æµ‹è¯•
npx tsx tests/test-spell-corrector.ts

# æœç´¢å»ºè®®æµ‹è¯•
npx tsx tests/test-search-suggester.ts
```

### æ„å»º

```bash
npm run build
```

### å¼€å‘æ¨¡å¼

```bash
npm run watch
```

## è®¸å¯

MIT
